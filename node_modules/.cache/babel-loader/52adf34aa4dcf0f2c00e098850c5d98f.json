{"ast":null,"code":"var _jsxFileName = \"D:\\\\download\\\\KarShare-master\\\\src\\\\components\\\\Login.js\";\nimport React from \"react\";\nimport Header from \"./Header\";\nimport { Redirect, withRouter } from \"react-router-dom\";\nimport \"./Login.css\";\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      email: \"\",\n      password: \"\",\n      status: \"\"\n    };\n    this.handlechange = this.handlechange.bind(this);\n    this.submithandler = this.submithandler.bind(this);\n  }\n\n  async submithandler(event) {\n    event.preventDefault();\n    await fetch(\"http://localhost:4000/loginauth\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: this.state.email,\n        password: this.state.password\n      })\n    }).then(res => res.json()).then(res => {\n      localStorage.setItem(\"tok\", res.token);\n      localStorage.setItem(\"type\", res.status1);\n    });\n\n    if (localStorage.getItem(\"tok\") && localStorage.getItem(\"tok\") !== \"undefined\" && localStorage.getItem(\"type\") == \"customer\") {\n      this.props.history.push(\"/\");\n    } else if (localStorage.getItem(\"tok\") && localStorage.getItem(\"tok\") !== \"undefined\" && localStorage.getItem(\"type\") == \"Admin\") {\n      this.props.history.push(\"/admin\");\n    } else if (localStorage.getItem(\"tok\") == \"undefined\") {\n      this.setState({\n        status: \"Error\"\n      });\n    }\n  }\n\n  handlechange(event) {\n    const {\n      name,\n      value,\n      checked,\n      type\n    } = event.target;\n    event.target.type == \"checkbox\" ? this.setState({\n      [event.target.name]: event.target.checked\n    }) : this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  render() {\n    if (localStorage.getItem(\"tok\") && localStorage.getItem(\"tok\") !== \"undefined\") {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login\",\n      style: {\n        backgroundPositionY: \"20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"title\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, \"KarShare Login\"), /*#__PURE__*/React.createElement(\"meta\", {\n      charSet: \"utf-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"meta\", {\n      name: \"viewport\",\n      content: \"width=device-width, initial-scale=1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"boxL\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        textShadow: \"black 0px 5px 10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }\n    }, \"Welcome to KarShare\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.submithandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputBoxL\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      value: this.state.email,\n      name: \"email\",\n      onChange: this.handlechange,\n      required: true,\n      autoComplete: \"off\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 15\n      }\n    }, \"Email Address\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputBoxL\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      value: this.state.password,\n      name: \"password\",\n      onChange: this.handlechange,\n      required: true,\n      autoComplete: \"off\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }\n    }, \"Password\")), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      class: \"buttonLogin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, \" Login\"))), this.state.email, this.state.password, localStorage.getItem(\"tok\"), this.state.status);\n  }\n\n}\n\nexport default withRouter(Login);","map":{"version":3,"sources":["D:/download/KarShare-master/src/components/Login.js"],"names":["React","Header","Redirect","withRouter","Login","Component","constructor","state","email","password","status","handlechange","bind","submithandler","event","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","json","localStorage","setItem","token","status1","getItem","props","history","push","setState","name","value","checked","type","target","render","backgroundPositionY","textShadow"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Header from \"./Header\";\nimport { Redirect, withRouter } from \"react-router-dom\";\nimport \"./Login.css\";\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      email: \"\",\n      password: \"\",\n      status: \"\",\n    };\n    this.handlechange = this.handlechange.bind(this);\n    this.submithandler = this.submithandler.bind(this);\n  }\n  async submithandler(event) {\n    event.preventDefault();\n    await fetch(\"http://localhost:4000/loginauth\", {\n      method: \"post\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        email: this.state.email,\n        password: this.state.password,\n      }),\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        localStorage.setItem(\"tok\", res.token);\n        localStorage.setItem(\"type\", res.status1);\n      });\n    if (\n      localStorage.getItem(\"tok\") &&\n      localStorage.getItem(\"tok\") !== \"undefined\" &&\n      localStorage.getItem(\"type\") == \"customer\"\n    ) {\n      this.props.history.push(\"/\");\n    } else if (\n      localStorage.getItem(\"tok\") &&\n      localStorage.getItem(\"tok\") !== \"undefined\" &&\n      localStorage.getItem(\"type\") == \"Admin\"\n    ) {\n      this.props.history.push(\"/admin\");\n    } else if (localStorage.getItem(\"tok\") == \"undefined\") {\n      this.setState({ status: \"Error\" });\n    }\n  }\n  handlechange(event) {\n    const { name, value, checked, type } = event.target;\n    event.target.type == \"checkbox\"\n      ? this.setState({ [event.target.name]: event.target.checked })\n      : this.setState({\n          [event.target.name]: event.target.value,\n        });\n  }\n\n  render() {\n    if (\n      localStorage.getItem(\"tok\") &&\n      localStorage.getItem(\"tok\") !== \"undefined\"\n    ) {\n      return <Redirect to=\"/\" />;\n    }\n    return (\n      <div className=\"login\" style = {{backgroundPositionY: \"20px\"}}>\n        <div>\n          <Header />\n        </div>\n\n        <title>KarShare Login</title>\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n        <div className=\"boxL\">\n          <h2 style = {{textShadow: \"black 0px 5px 10px\"}}>Welcome to KarShare</h2>\n          <form onSubmit={this.submithandler}>\n            <div className=\"inputBoxL\">\n              <input\n                type=\"email\"\n                value={this.state.email}\n                name=\"email\"\n                onChange={this.handlechange}\n                required\n                autoComplete=\"off\"\n              />\n              <label>Email Address</label>\n            </div>\n            <div className=\"inputBoxL\">\n              <input\n                type=\"password\"\n                value={this.state.password}\n                name=\"password\"\n                onChange={this.handlechange}\n                required\n                autoComplete=\"off\"\n              />\n              <label>Password</label>\n            </div>\n            <button type=\"submit\" class=\"buttonLogin\"> Login</button>\n          </form>\n        </div>\n        {this.state.email}\n        {this.state.password}\n        {localStorage.getItem(\"tok\")}\n        {this.state.status}\n      </div>\n    );\n  }\n}\nexport default withRouter(Login);\n"]},"metadata":{},"sourceType":"module"}